<!DOCTYPE html>
<html lang="en-GB">
<meta charset="utf-8">
<!--mobile 1st responsive style-->
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="./fromhooks.css">
<meta name="description" content="React from Hooks">
<meta name="keywords" content="Effect hooks,React.js,JavaScript">
<meta name="author" content="martin.mphil@gmail.com">
<title>Effects</title>
<body>

<article>
  <h1>Effect hook</h1>
  <p>
    Named after <a href="https://en.wikipedia.org/wiki/Side_effect_(computer_science)">side effects</a>.
  </p>
  <p>
    Effect hooks call the react function, "useEffect", from within a function component.
  </p>
  <p>
    By default effects execute after every render.
  </p>
  <p>
    A single component can call effect hooks many times.
  </p>
  <p>
    useEffect() takes a function as an argument.
  </p>
    <code>
    useEffect( () => { <br>
    &nbsp;&nbsp; const handleResize = () => setWidth(window.innerWidth) <br>
    &nbsp;&nbsp; window.addEventListener('resize', handleResize) <br>
    &nbsp;&nbsp; ... <br>
    }) <br>
  </code>
  <h3>Return function</h3>
  <p>
    An optional return function can be called to "clean up" after an effect,
    such as unsubscribing event listeners. Eg
  </p>
  <code>
    useEffect( () => { <br>
    &nbsp;&nbsp; const handleResize = () => setWidth(window.innerWidth) <br>
    &nbsp;&nbsp; window.addEventListener('resize', handleResize) <br>
    &nbsp;&nbsp; return () => { <br>
    &nbsp;&nbsp;&nbsp;&nbsp; window.removeEventListener('resize', handleResize) <br>
    &nbsp;&nbsp; } <br>
    }) <br>
  </code>
  <h3>Second argument</h3>
  <p>
    Optionally an effect may check for changes in specific props or state by passing them in as
    an arrayed second argument. In the example below the effect skips unless "count" changes.
  </p>
  <code>
    useEffect(() => { <br>
    &nbsp;&nbsp; document.title = `You clicked ${count} times` <br>
    }, <strong>[count]</strong>) <br>
  </code>
  <p>
    Supplying an empty array (ie "[]") as a second argument to useEffect
    ensures the effect and clean-up only occur when a component mounts and unmounts.
  </p>

</article>


<aside>
  <pre>
    <code>
// Code example

import React, { useState, useEffect } from 'react'

function MyComponent() {
  const [count, setCount] = useState(0)

  useEffect(() => {
    document.title = `You clicked ${count} times`
  });

  return (
    &lt;div&gt;
      //... component html ...
    &lt;/div&gt;
  )
}
    </code>
  </pre>
</aside>

<nav>
  <ul>
    <li><a href="./index.html">Index Page</a></li>
    <li><a href="./intro_to_hooks.html">Intro</a></li>
    <li><a href="./react_basics.html">React basics</a></li>
    <li><a href="./props.html">Props</a></li>
    <li><a href="./function_component.html">Function component</a></li>
    <li><a href="./state_hook.html">State hook</a></li>
    <li>Effect hook</li>
    <li><a href="./custom_hook.html">Custom hook</a></li>
    <li><a href="./sources.html">Sources</a></li>
  </ul>
</nav>

</body>
</html>